<p-tabView [scrollable]="true" [(activeIndex)]="activeIndex" (onClose)="closeCourse($event.index)">
  <p-tabPanel header="Учебные материалы" leftIcon="pi pi-graduation-cap">
    <ng-template pTemplate="content">
      <p-splitter [style]="{ height: '100%'}" [panelSizes]="[70, 30]" class="min400-min340">
        <ng-template pTemplate>
          <p-dataView [value]="filteredCourses" layout="grid" class="clickable-card-grid"
                      emptyMessage="Не найдено ни одной темы">
            <ng-template pTemplate="grid" let-topics>
              <div class="quick-search-wrapper">
                <div class="p-input-icon-left">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text" placeholder="Быстрый поиск" [(ngModel)]="filterValue"/>
                </div>
              </div>
              <div class="grid" style="justify-content: center; overflow: auto">
                <div *ngFor="let topic of topics" style="padding: 0.5rem">
                  <p-card (click)="openTopic(topic)" class="clickable-card">
                    <h3 class="no-margin header">{{ topic.title }}</h3>
                    <hr>
                    <div>{{ topic.description }}</div>
                    <p-footer>
                      <div style="display: flex; flex-direction: column;">
                      <div style="width: 100%; text-align: end; font-size: smaller;">Пройдено 0 из {{topic.lessonsCount}}</div>
                      <p-progressBar pTooltip="Прогресс прохождения" [value]="30" [showValue]="false"
                                     [style]="{ height: '6px' }"/>
                      </div>
                      <hr>
                      <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 4px;">
                        <p-tag *ngFor="let trait of topic.traits" severity="secondary" [rounded]="true"
                               [style]="{backgroundColor: 'var(--border-color)', color: 'var(--text-dark)', width: 'fit-content'}">
                          <div style="padding: 2px; display: inline-flex; align-items: center; font-size: smaller;">
                            <i class="pi pi-tag" style="padding-right: 0.5rem; font-size: small"></i>
                            <span>{{ trait.name }}</span>
                          </div>
                        </p-tag>
                      </div>
                    </p-footer>
                  </p-card>
                </div>
              </div>
            </ng-template>

            <ng-template pTemplate="footer">
              <div>Всего ваших курсов: {{ topics ? topics.length : 0 }}</div>
            </ng-template>
          </p-dataView>
        </ng-template>

        <ng-template pTemplate>
          <div class="full-width-center" style="padding: 20px">
            <h4 class="no-margin" style="padding-bottom: 20px">Ваше расписание</h4>

            <p-calendar
              [(ngModel)]="selectedDate"
              class="inline-calendar"
              [inline]="true"
              [showWeek]="true">
              <ng-template pTemplate="date" let-date>
                <span class="calendar-cell" [class.busy]="date.day > 10 && date.day < 18">
                    {{ date.day }}
                </span>
              </ng-template>
            </p-calendar>

            <div *ngIf="selectedDate" class="selected-date-wrapper">
              {{ selectedDate | date }}
              <p-button pTooltip="Очистить фильтр по дате" icon="pi pi-times"
                        (click)="selectedDate = undefined"
                        styleClass="button-mini button-clear">
              </p-button>
            </div>

            <div class="schedule-wrapper">
              <div>✔ Сдать тест</div>
              <div>✔ Воркшоп по Java</div>
            </div>
          </div>
        </ng-template>
      </p-splitter>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel *ngFor="let topic of openedTopics" [header]="topic.title" closable="true">
    <ng-template pTemplate="content">
      <app-course-panel [topic]="topic.value" [student]="userService.user!"  [mode]="CoursePanelMode.STUDENT"></app-course-panel>
    </ng-template>
  </p-tabPanel>
</p-tabView>


<!--
<p-tabPanel #videoLessons header="Видеоуроки" leftIcon="pi pi-video">
  <ng-template pTemplate="content">
    <app-video-lessons [isActive]="videoLessons.selected"></app-video-lessons>
  </ng-template>
</p-tabPanel>
<p-tabPanel header="Презентации" leftIcon="pi pi-book">
  <ng-template pTemplate="content">
    <app-presentation-lessons></app-presentation-lessons>
  </ng-template>
</p-tabPanel>
<p-tabPanel #onlineLessons header="Онлайн лекции" leftIcon="pi pi-play-circle">
  <ng-template pTemplate="content">
    <app-online-lessons [isActive]="onlineLessons.selected"></app-online-lessons>
  </ng-template>
</p-tabPanel>
<p-tabPanel header="Тесты" leftIcon="pi pi-verified">
  <ng-template pTemplate="content">
    <div>Тесты</div>
  </ng-template>
</p-tabPanel>-->
